<!DOCTYPE html><html lang="en"><head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pengutos NFT Store</title>
  <script src="https://unpkg.com/aptos@1.7.2/dist/index.umd.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
      color: #333;
      transition: background-color 0.3s, color 0.3s;
    }.dark-mode {
  background-color: #121212;
  color: #fff;
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  background-color: #6200ea;
  color: white;
}

.nft-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 20px;
  padding: 20px;
}

.nft-card {
  background-color: white;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s;
}

.nft-card:hover {
  transform: scale(1.03);
}

.nft-card img {
  width: 100%;
  height: 250px;
  object-fit: cover;
}

.nft-card .info {
  padding: 15px;
}

.nft-card button {
  padding: 10px;
  width: 100%;
  background-color: #6200ea;
  color: white;
  border: none;
  cursor: pointer;
}

.wallet-btn, .dark-mode-btn {
  padding: 10px 20px;
  border: none;
  background-color: #fff;
  color: #6200ea;
  font-weight: bold;
  cursor: pointer;
  border-radius: 5px;
}

.dark-mode .wallet-btn, .dark-mode .dark-mode-btn {
  background-color: #333;
  color: #fff;
}

  </style>
</head><body>
  <div class="header">
    <h1>üêß Pengutos NFT Store</h1>
    <div>
      <button class="wallet-btn" onclick="connectWallet()">üîå Connect Wallet</button>
      <button class="dark-mode-btn" onclick="toggleDarkMode()">üåô Dark Mode</button>
    </div>
  </div>  <div class="nft-grid" id="nftGrid"></div>  <script>
    const images = [
      "https://res.cloudinary.com/dtjjgiitl/image/upload/q_auto:good,f_auto,fl_progressive/v1753436397/j3dzbkvhzrqlsn3waqtv.jpg",
      "https://res.cloudinary.com/dtjjgiitl/image/upload/v1753423153/cch4j8fbpkb16vy3xwlq.jpg",
      "https://res.cloudinary.com/dtjjgiitl/image/upload/v1753423384/vhczxko3ghfm0iicgdmv.jpg",
      "https://res.cloudinary.com/dtjjgiitl/image/upload/v1753423192/qxtvetem8vk9duqcz1f8.jpg",
      "https://res.cloudinary.com/dtjjgiitl/image/upload/v1753423214/p7dkujce1xdtszarwy7i.jpg",
      "https://res.cloudinary.com/dtjjgiitl/image/upload/v1753423233/kgtwgmn6zrkjjs8x6pgb.jpg",
      "https://res.cloudinary.com/dtjjgiitl/image/upload/v1753423267/xyxfu5n8xn5evnzyazq5.jpg",
      "https://res.cloudinary.com/dtjjgiitl/image/upload/v1753423287/konwtmn9iohhho2h9uor.jpg",
      "https://res.cloudinary.com/dtjjgiitl/image/upload/v1753423303/cqq5omchndnxalncnwmc.jpg",
      "https://res.cloudinary.com/dtjjgiitl/image/upload/v1753423321/rs84m68zstf3ehydkcnv.jpg"
    ];

    const names = [
      "Pengutos #1", "Pengutos #2", "Pengutos #3", "Pengutos #4", "Pengutos #5",
      "Pengutos #6", "Pengutos #7", "Pengutos #8", "Pengutos #9", "Pengutos #10"
    ];

    const prices = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1];
    const nftOwner = "0xf4b765e683f399b07790cf217b188b1918c6af55";
    const collectionName = "Pengutos";

    let walletAddress = null;

    async function connectWallet() {
      if (!window.aptos) return alert("Please install Petra Wallet");
      try {
        const response = await window.aptos.connect();
        walletAddress = response.address;
        document.querySelector(".wallet-btn").innerText = `üîì ${walletAddress.slice(0, 6)}...${walletAddress.slice(-4)}`;
        alert("Wallet connected: " + walletAddress);
      } catch (err) {
        console.error("Wallet connection failed:", err);
      }
    }

    function toggleDarkMode() {
      document.body.classList.toggle("dark-mode");
    }

    async function mint(index) {
      if (!walletAddress) return alert("Please connect Petra wallet first.");

      const tokenName = names[index];

      try {
        // 1. Offer token from creator to user
        await window.aptos.signAndSubmitTransaction({
          type: "entry_function_payload",
          function: "0x3::token_transfers::offer_script",
          type_arguments: [],
          arguments: [
            walletAddress,
            nftOwner,
            collectionName,
            tokenName,
            1
          ]
        });

        // 2. Claim token to user's wallet
        await window.aptos.signAndSubmitTransaction({
          type: "entry_function_payload",
          function: "0x3::token_transfers::claim_script",
          type_arguments: [],
          arguments: [
            nftOwner,
            collectionName,
            tokenName
          ]
        });

        alert(`üéâ ${tokenName} minted to your wallet!`);
      } catch (error) {
        console.error("Mint failed:", error);
        alert("‚ùå Mint failed. Try again.");
      }
    }

    function displayNFTs() {
      const container = document.getElementById("nftGrid");
      images.forEach((img, idx) => {
        const card = document.createElement("div");
        card.className = "nft-card";
        card.innerHTML = `
          <img src="${img}" alt="NFT Image" />
          <div class="info">
            <h3>${names[idx]}</h3>
            <p>Price: ${prices[idx]} APT</p>
            <button onclick="mint(${idx})">Mint</button>
          </div>
        `;
        container.appendChild(card);
      });
    }

    displayNFTs();
  </script></body></html>
